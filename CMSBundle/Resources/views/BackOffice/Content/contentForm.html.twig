{##
 # This file is part of the PHPOrchestra\CMSBundle.
 #
 # @author NoÃ«l GILAIN <noel.gilain@businessdecision.com>
 ##}

{% extends 'PHPOrchestraCMSBundle:BackOffice:contentLayout.html.twig' %}

{% block beforeSmartDiv %}
    <ul class="nav nav-tabs" id="languages">
        {% for language in availableLanguages %}
            {% if language|upper == form.vars.value.language|upper %}
                <li class="active"><a><img alt="{{ language }} flag" src="{{ asset('bundles/phporchestracms/img/flags/' ~ language ~ '.png') }}"> {{ language|upper }}</a></li>
            {% else %}
                <li>
                    <a href="{{ path(
                        'phporchestra_cms_backofficeview_content_index',
                        {
                            'action' : 'findforedit',
                            'contentTypeId' : form.vars.value.contentType,
                            'contentId' : form.vars.value.contentId,
                            'language' : language
                        }
                    ) }}" class="tabLink"><img alt="{{ language }} flag" src="{{ asset('bundles/phporchestracms/img/flags/' ~ language ~ '.png') }}"> {{ language|upper }}</a>
                </li>
            {% endif %}
        {% endfor %}
        {% if contentVersions|length > 0 %}
            <li class="pull-right active">
                <div>
                    <select class="selectSwitcher">
                        <option value="{{ path(
                            'phporchestra_cms_backofficeview_content_index',
                            {
                                'action' : 'duplicate',
                                'contentTypeId' : form.vars.value.contentType,
                                'id' : form.vars.value.id.__toString()
                            }
                        ) }}" data-loadmode="ajax">{{ 'contents.form.newVersion'|trans({}, 'backOffice') }}</option>
                    {% for version in contentVersions %}
                        <option value="{{ path(
                            'phporchestra_cms_backofficeview_content_index',
                            {
                                'action' : 'edit',
                                'contentTypeId' : form.vars.value.contentType,
                                'id' : version.id.__toString()
                            }
                        ) }}" {% if version.version == form.vars.value.version %}selected="selected"{% endif %}
                        >{{ 'contents.form.version%versionNumber%'|trans({'versionNumber':version.version}, 'backOffice') }}  ({{ version.status }})</option>
                    {% endfor %}
                    </select>
                </div>
            </li>
        {% endif %}
    </ul>
{% endblock %}

{% block mainContent %}
    {{ form(form) }}
{% endblock %}

{% block afterSmartDiv %}
    {% if ribbon is defined %}
        <div class="ribbon">
        {{ ribbon|raw }}
        </div>
    {% endif %}
{% endblock %}
