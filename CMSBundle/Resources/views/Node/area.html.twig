{##
 # This file is part of the PHPOrchestra\CMSBundle.
 #
 # @author NoÃ«l Gilain <noel.gilain@businessdecision.com>
 ##}

<fieldset id="{{ area.areaId }}" style="background-color:#98BDE2;border-color:#000000;margin-top:8px;">
    <legend style="background-color:#BADFF4;border:1px solid #000000;">AREA | {{ area.areaId }}</legend>
{% for subArea in area.subAreas %}
    {% include "PHPOrchestraCMSBundle:Node:area.html.twig" with {"area" : subArea, "blocks" : blocks} only %}
{% endfor %}
{% for blockReference in area.blocks %}
    {% set block = false %}
    {% if blocks[blockReference.nodeId][blockReference.blockId] is defined %}
        {% set block = blocks[blockReference.nodeId][blockReference.blockId] %}
    {% endif %}
    <fieldset style="background-color:#3B6691;border-color:#000000;margin-top:8px;">
        <legend style="background-color:#5D88B3;border:1px solid #000000;">
            NodeId : {{ blockReference.nodeId }} BlockId : {{ blockReference.blockId }}
        {% if block %} <span>{{ block.component }}</span>{% endif %}
        </legend>
    {% if block %}
        {{ render_esi(controller('PHPOrchestraCMSBundle:Block/' ~ block.component ~ ':show', block.attributes), {'ignore_errors' : true} ) }}
    {% endif %}
    </fieldset>
{% endfor %}
</fieldset>
