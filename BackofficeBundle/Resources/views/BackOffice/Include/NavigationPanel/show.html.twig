<nav data-url="{{ path('open_orchestra_backoffice_menu') }}">
    <ul>
        {% for rootMenuWeights in strategies[navigation_panel.root_menu] %}
            {% for rootMenu in rootMenuWeights %}

                {% set treeRootMenu %}{% if strategies[rootMenu.name] is defined %}
                        {% for subMenuWeights in strategies[rootMenu.name] %}
                            {% for subMenu in subMenuWeights %}
                                {% if is_granted(subMenu.getRole) %}
                                    <li>
                                        {{ subMenu.show|raw }}
                                    </li>
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    {% endif %}{% endset %}
                {% if not strategies[rootMenu.name] is defined  %}
                    <li>
                        {{ rootMenu.show|raw }}
                    </li>
                {% elseif not treeRootMenu|trim is empty %}
                    <li>
                        {{ rootMenu.show|raw }}
                        <ul>
                            {{ treeRootMenu|raw }}
                        </ul>
                    </li>
                {% endif %}

            {% endfor %}
        {% endfor %}
    </ul>
</nav>
